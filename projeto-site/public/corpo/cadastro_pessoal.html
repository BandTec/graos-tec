<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>GrãosTech</title>
        <link rel="stylesheet" href="../CSS/cadastro_Pessoal.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        <!-- <script type="text/javascript" src="../js/validação-caddastro-pessoa.js"></script> -->
        <link rel="shortcut icon" type="image/x-icon" href="../2261favicon graos.ico">
    </head>
    <body>
        
        <nav>
            
            <a href="#" class="nav-toggle-btn"><img src="../imagens/menu-button.png" alt=""></a>
            <span><img src="../imagens/logoo.png" alt=""></span>
            <ul class="links">
                <li><a href="/corpo/login.html">Logar</a></li>
                <li><a href="/corpo/simulador.html">Simulador de perdas</a></li>
                <li class="Suporte"><a href="/corpo/suporte.html">Suporte</a></li>
            </ul>
            
            
        </nav>
        
          
            <div class="FundoCadastro">
                <h1>Cadastro</h1>
                <form class="posicaoCad" id="form_cadastro" method="POST" onsubmit="return cadastrar()">
                    <label class="labels">Insira seu nome</label>
                    <input placeholder="Nome" id="valor_nome" name="nome">

                    <label class="labels">Informe seu E-mail</label>
                    <input placeholder="E-mail" id="valor_email" name="email"> 

                    <label class="labels">Crie uma senha</label>
                    <input type="password" placeholder="Senha" id="valor_senha1" name="senha">
                
                    <label class="labels">Confirme sua senha</label>
                    <input type="password" placeholder="Confirmar Senha" id="valor_senha2">
                    
                    <label class="labels">Informe seu telefone</label>
                    <input placeholder="Telefone" id="valor_telefone" name="telefone">
                    
                    <label class="labels">CEP</label><input placeholder="CEP" id="valor_cep" name="cep">
                    <div id="valida_cep"></div>

                    <label class="labels">Rua</label><input placeholder="Rua" id="valor_rua" name="rua">
                    <div id="valida_rua"></div>

                    <label class="labels">Numero</label><input placeholder="Numero" id="valor_numero" name="numero">
                    <div id="valida_numero"></div>

                    <label class="labels">Complemento</label><input placeholder="Complemento" id="valor_complemento" name="complemento">
                    <div id="valida_cep"></div>

                    <label class="labels">Bairro</label><input placeholder="Bairro" id="valor_bairro" name="bairro">
                    <div id="valida_bairro"></div>

                    <label class="labels">Cidade</label><input placeholder="Cidade" id="valor_cidade" name="cidade">
                    <div id="valida_cidade"></div>

                    <label class="labels">Estado</label><select name="Estado" id="Estados" class="config_option">
                        <option value="" >Selecione um Estado</option>
                        <option value="AC">Acre</option>
                        <option value="AL">Alagoas</option>
                        <option value="AP">Amapá</option>
                        <option value="AM">Amazonas</option>
                        <option value="BA">Bahia</option>
                        <option value="CE">Ceará</option>
                        <option value="DF">Distrito Federal</option>
                        <option value="ES">Espírito Santo</option>
                        <option value="GO">Goiás</option>
                        <option value="MA">Maranhão</option>
                        <option value="MT">Mato Grosso</option>
                        <option value="MS">Mato Grosso do Sul</option>
                        <option value="MG">Minas Gerais</option>
                        <option value="PA">Pará</option>
                        <option value="PB">Paraíba</option>
                        <option value="PR">Paraná</option>
                        <option value="PE">Pernambuco</option>
                        <option value="PI">Piauí</option>
                        <option value="RJ">Rio de Janeiro</option>
                        <option value="RN">Rio Grande do Norte</option>
                        <option value="RS">Rio Grande do Sul</option>
                        <option value="RO">Rondônia</option>
                        <option value="RR">Roraima</option>
                        <option value="SC">Santa Catarina</option>
                        <option value="SP">São Paulo</option>
                        <option value="SE">Sergipe</option>
                        <option value="TO">Tocantins</option>
                     </select>
                    <div class="validação_estado" id="valida_estado"></div>
                    <!-- <div class="posicaBtA"> -->
                        <button type="submit"><img src="../imagens/login.png" alt=""></button>
                    <!-- </div> -->
                </form>
            </div>
    </div>

        <script>
        (function() {
            var bodyEl = $('body'),
                navToggleBtn = bodyEl.find('.nav-toggle-btn');
                navToggleBtn.on('click', function(e) {
                bodyEl.toggleClass('active-nav');
                e.preventDefault();
            });
        })();
        </script>

<div style="position: fixed; top: 91%;left: 89%;">
    <!-- Ferramenta de HelpDesk -->
    <script type="text/javascript">
                // <![CDATA[
                var ttChatLoaderS = document.createElement('script');
                document.tomticketChatLoaderScriptVersion = 2;
                ttChatLoaderS.src = 'https://teste-graostech.tomticket.com/scripts-chat/chat.min.js'
                + '?id=EP36672'
                + '&autoOpen=0'
                + '&hideWhenOffline=0'
                + '&d=teste-graostech'
                + '&ts=' + new Date().getTime()
                + '&ref=' + encodeURIComponent(document.URL);
                document.body.appendChild(ttChatLoaderS);
                //]]>
                
	   
       
        function cadastrar() {
        //validacao_cadastro_pessoal();
        var formulario = new URLSearchParams(new FormData(form_cadastro));
        fetch("/usuarios", {
            method: "POST",
            body: formulario
        }).then(function (response) {
            if(valor_nome.value.length <=6){
                alert("O campo 'Nome' deve conter 6 carácteres no minímo ")
                valor_nome.focus()
                return false;
            }

            if(valor_email.value.length <=10 || valor_email.value.length >=40 || valor_email.value.indexOf ("@") == -1){
                alert("Campo 'E-mail' inválido");
                valor_email.focus()
                return false;
            }

            if(valor_senha1.value.length <6 || valor_senha1.value.length >=19){
                alert("O campo 'Senha' deve conter entre 6 e 19 caracteres");
                valor_senha1.focus()
                return false;
            }

            if(valor_senha1.value != valor_senha2.value){
                alert("As 'Senhas' não podem ser divergentes");
                valor_senha2.focus()
                return false;
            }

            if(valor_telefone.value.length != 11){
                alert("Número de 'Telefone' inválido");
                valor_telefone.focus()
                return false;
            }

            if(valor_cep.value.length != 8){
                alert("O campo 'CEP' deve conter 8 caracteres");
                valor_cep.focus()
                return false;
            }
            if(valor_rua.value == ""){
                alert("Preencha o campo 'Rua'");
                valor_rua.focus()
                return false;
            }

            if(valor_numero.value == ""){
                alert("Preencha o campo 'Número'");
                valor_numero.focus()
                return false;
            }

            if(valor_bairro.value == "" || valor_bairro <5){
                alert("Campo 'Bairro' inválido");
                valor_bairro.focus()
                return false;
            }
            if(valor_cidade.value == "" || valor_cidade <5){
                alert("Campo 'Cidade' inválido");
                valor_cidade.focus()
                return false;
            }else if (response.ok) {
                alert('Cadastro efetuado!');
                window.location.href='login.html';

            } else {
                alert('Cadastro inválido!');

            }
        });

        return false;
        }

    </script>

</div>

    </body>
</html>
